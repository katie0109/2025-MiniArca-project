<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MINIARCA - 전신사진 촬영</title>
    <style>
        @font-face {
            font-family: 'LeeSeoyun';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2202-2@1.0/LeeSeoyun.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .photo-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #fef9e7 0%, #f0f8ff 30%, #fdf2f8 60%, #f0f9ff 100%);
            font-family: 'LeeSeoyun', sans-serif;
        }

        /* 배경 글래스 오브들 */
        .glass-orb {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.6) 0%,
                    rgba(255, 245, 230, 0.5) 25%,
                    rgba(230, 245, 255, 0.45) 50%,
                    rgba(255, 240, 245, 0.4) 75%,
                    rgba(245, 250, 255, 0.5) 100%);
            backdrop-filter: blur(25px);
            border: 1.5px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 80px rgba(255, 255, 255, 0.3),
                inset 0 0 30px rgba(255, 255, 255, 0.2),
                0 8px 25px rgba(0, 0, 0, 0.05);
            animation: float 20s ease-in-out infinite;
            z-index: 1;
        }

        .orb-1 { width: 250px; height: 250px; top: 8%; left: 12%; animation-delay: 0s; }
        .orb-2 { width: 150px; height: 150px; top: 18%; right: 18%; animation-delay: 2s; }
        .orb-3 { width: 180px; height: 180px; bottom: 22%; left: 8%; animation-delay: 4s; }
        .orb-4 { width: 100px; height: 100px; bottom: 12%; right: 22%; animation-delay: 1s; }
        .orb-5 { width: 130px; height: 130px; top: 45%; right: 8%; animation-delay: 3s; }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(1deg); }
            66% { transform: translateY(-10px) rotate(-1deg); }
        }

        /* 좌측 카운트다운 정보 영역 */
        .left-info {
            position: fixed;
            left: 200px;
            top: 50%;
            transform: translateY(-50%);
            width: 350px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            z-index: 5;
        }

        /* 좌측 카운트다운 정보 카드 - 숫자 제외하고 텍스트만 */
        .countdown-info-card {
            background: linear-gradient(135deg, 
                rgba(255, 248, 225, 0.9) 0%,
                rgba(252, 228, 236, 0.85) 100%
            );
            backdrop-filter: blur(20px);
            padding: 35px 30px;
            border-radius: 30px;
            border: 2px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            text-align: center;
        }

        .countdown-number {
            display: none; /* 숨김 처리 */
        }

        .countdown-text {
            font-size: 1.5em;
            color: #4a5568;
            margin-bottom: 15px;
            font-weight: 500;
            line-height: 1.2;
        }

        .pose-text {
            font-size: 1.3em;
            color: #dc2626;
            font-weight: 500;
            line-height: 1.3;
        }

        /* 우측 촬영상태 + 진행단계 영역 */
        .right-actions {
            position: fixed;
            right: 280px;
            top: 50%;
            transform: translateY(-50%);
            width: 280px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            z-index: 5;
        }

        .shot-info-card {
            background: linear-gradient(135deg, 
                rgba(255, 248, 225, 0.9) 0%,
                rgba(252, 228, 236, 0.85) 100%
            );
            backdrop-filter: blur(20px);
            padding: 40px 35px;
            border-radius: 30px;
            border: 2px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            text-align: center;
        }

        .shot-counter {
            font-size: 3.5em;
            color: #2d3748;
            font-weight: 800;
            margin-bottom: 15px;
        }

        .shot-type {
            font-size: 1.5em;
            color: #4a5568;
            font-weight: 500;
        }

        .progress-card {
            background: linear-gradient(135deg, 
                rgba(241, 248, 233, 0.9) 0%,
                rgba(255, 243, 224, 0.85) 100%
            );
            backdrop-filter: blur(20px);
            padding: 35px;
            border-radius: 30px;
            border: 2px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        }

        .progress-steps {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.7);
            border: 2px solid rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            color: #9ca3af;
            font-weight: 600;
            transition: all 0.4s ease;
        }

        .step-circle.current {
            border-color: #ff6b6b;
            background: rgba(255, 107, 107, 0.15);
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.3);
            color: #ff6b6b;
            animation: currentStep 2s ease-in-out infinite;
        }

        .step-circle.completed {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-color: #4facfe;
            box-shadow: 0 3px 10px rgba(79, 172, 254, 0.3);
        }

        .step-circle.completed::after {
            content: "✓";
            font-size: 1.5em;
            font-weight: bold;
        }

        .step-label {
            font-size: 1.4em;
            color: #4a5568;
            font-weight: 500;
        }

        @keyframes currentStep {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }



        /* 전신사진 촬영 UI */
        .photo-booth-ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 메인 촬영 화면 - 전신사진용으로 더 길게 */
        .main-camera-container {
            position: relative;
            width: 500px;
            height: 92vh;
            max-height: 900px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(25px);
            border-radius: 40px;
            border: 4px solid rgba(255, 255, 255, 0.7);
            box-shadow: 0 30px 100px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* 카운트다운 중앙 영역 - 숫자 오버레이 추가 */
        .countdown-area {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
        }

        .camera-preview {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5em;
            text-align: center;
            font-weight: 300;
            position: relative;
        }

        /* 중앙 카운트다운 숫자 오버레이 */
        .countdown-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
        }

        .countdown-display-center {
            font-size: 6em;
            font-weight: 800;
            color: #2d3748;
            text-shadow: 0 0 15px rgba(74, 85, 104, 0.3);
            animation: countdownPulse 1s ease-in-out infinite;
            letter-spacing: -0.02em;
        }

        @keyframes countdownPulse {
            0%, 100% { 
                transform: scale(1);
                text-shadow: 0 0 15px rgba(74, 85, 104, 0.3);
            }
            50% { 
                transform: scale(1.05);
                text-shadow: 0 0 20px rgba(74, 85, 104, 0.5);
            }
        }

        /* 카메라 화면 (촬영 중) - 전체 화면 사용 */
        .camera-view {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2em;
            text-align: center;
            font-weight: 300;
        }

        /* 완료 후 화면 - 전체 화면 사용 */
        .completion-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(255, 248, 225, 0.98) 0%,
                rgba(227, 242, 253, 0.95) 50%,
                rgba(255, 243, 224, 0.98) 100%
            );
            backdrop-filter: blur(25px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 50px;
        }

        .completion-title {
            font-size: 3.5em;
            color: #4a5568;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .completion-message {
            font-size: 1.5em;
            color: #6b7280;
            margin-bottom: 50px;
            line-height: 1.6;
            font-weight: 300;
        }

        .action-buttons {
            display: flex;
            gap: 30px;
        }

        .btn {
            padding: 18px 35px;
            font-size: 1.2em;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            color: #4a5568;
            border: 2px solid rgba(255, 240, 180, 0.5);
            border-radius: 25px;
            cursor: pointer;
            font-family: 'LeeSeoyun', sans-serif;
            transition: all 0.3s ease;
            font-weight: 500;
            min-width: 140px;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(74, 85, 104, 0.15);
        }

        .btn.primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-color: #4facfe;
        }

        .btn.primary:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 15px 35px rgba(79, 172, 254, 0.3);
        }

        /* 상태별 표시/숨김 */
        .hidden {
            display: none !important;
        }

        /* 반응형 디자인 */
        @media (max-width: 1700px) {
            .left-info {
                left: 170px;
                width: 260px;
            }
            
            .right-actions {
                right: 170px;
                width: 260px;
            }
        }

        @media (max-width: 1500px) {
            .left-info {
                left: 140px;
                width: 240px;
            }
            
            .right-actions {
                right: 140px;
                width: 240px;
            }
        }

        @media (max-width: 1300px) {
            .left-info {
                left: 110px;
                width: 220px;
            }
            
            .right-actions {
                right: 110px;
                width: 220px;
            }
        }

        @media (max-width: 1200px) {
            .left-info, .right-actions {
                display: none;
            }
            
            .main-camera-container {
                width: 90vw;
                max-width: 500px;
            }
        }

        @media (max-width: 768px) {
            .main-camera-container {
                width: 90vw;
                height: 80vh;
                border-radius: 30px;
            }
            
            .countdown-display {
                font-size: 8em;
            }
            
            .countdown-message {
                font-size: 1.5em;
            }
            
            .completion-title {
                font-size: 2.5em;
            }
            
            .glass-orb {
                opacity: 0.6;
            }
            
            .orb-1, .orb-2, .orb-3 {
                width: 100px;
                height: 100px;
            }
            
            .orb-4, .orb-5 {
                width: 60px;
                height: 60px;
            }
        }

        @media (max-width: 480px) {
            .main-camera-container {
                width: 95vw;
                height: 75vh;
                border-radius: 25px;
            }
            
            .countdown-display {
                font-size: 6em;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 20px;
            }

            .btn {
                padding: 15px 30px;
                font-size: 1.1em;
            }
        }
    </style>
</head>

<body>
    <div class="photo-container">
        <!-- 배경 글래스 오브들 -->
        <div class="glass-orb orb-1"></div>
        <div class="glass-orb orb-2"></div>
        <div class="glass-orb orb-3"></div>
        <div class="glass-orb orb-4"></div>
        <div class="glass-orb orb-5"></div>

        <!-- 좌측 카운트다운 정보 영역 -->
        <div class="left-info">
            <!-- 카운트다운 정보 카드 -->
            <div id="countdownInfoCard" class="countdown-info-card">
                <div id="countdownNumber" class="countdown-number">5</div>
                <div id="countdownText" class="countdown-text">앞면 전신사진을 준비하세요</div>
                <div id="poseText" class="pose-text">정면을 보고 자연스럽게 서주세요</div>
            </div>
        </div>

        <!-- 우측 촬영상태 + 진행단계 영역 -->
        <div class="right-actions">
            <div class="shot-info-card">
                <div class="shot-counter">
                    <span id="currentShot">1</span> / 2
                </div>
                <div id="shotType" class="shot-type">앞면 촬영</div>
            </div>
            
            <div class="progress-card">
                <div class="progress-steps">
                    <div class="progress-step">
                        <div id="frontStep" class="step-circle current">앞</div>
                        <div class="step-label">앞면</div>
                    </div>
                    <div class="progress-step">
                        <div id="backStep" class="step-circle">뒤</div>
                        <div class="step-label">뒷면</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 전신사진 촬영 UI -->
        <div class="photo-booth-ui">
            <div class="main-camera-container">
                <!-- 카운트다운 화면 - 중앙에 숫자 오버레이 -->
                <div id="countdownArea" class="countdown-area">
                    <div class="camera-preview">
                        📷 카메라 미리보기<br>
                        (실제로는 웹캠 화면이 보입니다)
                    </div>
                    
                    <!-- 중앙 카운트다운 숫자 -->
                    <div class="countdown-overlay">
                        <div id="countdownDisplayCenter" class="countdown-display-center">5</div>
                    </div>
                </div>

                <!-- 카메라 화면 -->
                <div id="cameraView" class="camera-view hidden">
                    📷 촬영 중...<br>
                    (실제로는 웹캠 전신 화면)
                </div>

                <!-- 완료 화면 -->
                <div id="completionScreen" class="completion-screen hidden">
                    <div class="completion-title">🎉 촬영 완료!</div>
                    <div class="completion-message">
                        앞면과 뒷면 전신사진이<br>
                        성공적으로 촬영되었습니다!<br>
                        이제 분석을 시작하시겠어요?
                    </div>
                    <div class="action-buttons">
                        <button class="btn" onclick="restartPhotoBooth()">다시 촬영</button>
                        <button class="btn primary" onclick="startAnalysis()">분석 시작</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수
        let currentPhoto = 1; // 1: 앞면, 2: 뒷면
        let countdown = 5;
        let countdownInterval = null;
        let isCountingDown = false;

        // DOM 요소들
        const currentShotEl = document.getElementById('currentShot');
        const shotTypeEl = document.getElementById('shotType');
        const countdownAreaEl = document.getElementById('countdownArea');
        const countdownInfoCardEl = document.getElementById('countdownInfoCard');
        const countdownDisplayCenterEl = document.getElementById('countdownDisplayCenter');
        const countdownTextEl = document.getElementById('countdownText');
        const poseTextEl = document.getElementById('poseText');
        const cameraViewEl = document.getElementById('cameraView');
        const completionScreenEl = document.getElementById('completionScreen');
        const frontStepEl = document.getElementById('frontStep');
        const backStepEl = document.getElementById('backStep');
        const rightActionsEl = document.querySelector('.right-actions');

        // 촬영 정보
        const photoInfo = {
            1: {
                type: "앞면 촬영",
                message: "앞면 전신사진을 준비하세요",
                instruction: "정면을 보고 자연스럽게 서주세요"
            },
            2: {
                type: "뒷면 촬영", 
                message: "뒷면 전신사진을 준비하세요",
                instruction: "뒤돌아서서 자연스럽게 서주세요"
            }
        };

        // 페이지 로드 시 시작
        window.addEventListener('load', function() {
            console.log('📸 MINIARCA 전신사진 촬영 시작!');
            setTimeout(startCountdown, 1000);
        });

        // 카운트다운 시작
        function startCountdown() {
            if (isCountingDown) return;
            
            isCountingDown = true;
            countdown = 5;
            
            // UI 상태 업데이트
            updateUI();
            
            const interval = setInterval(() => {
                countdownDisplayCenterEl.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(interval);
                    takePhoto();
                } else {
                    countdown--;
                }
            }, 1000);
            
            countdownInterval = interval;
        }

        // UI 상태 업데이트
        function updateUI() {
            const info = photoInfo[currentPhoto];
            
            currentShotEl.textContent = currentPhoto;
            shotTypeEl.textContent = info.type;
            countdownTextEl.textContent = info.message;
            poseTextEl.textContent = info.instruction;
            
            countdownAreaEl.classList.remove('hidden');
            countdownInfoCardEl.classList.remove('hidden');
            cameraViewEl.classList.add('hidden');
            completionScreenEl.classList.add('hidden');
            
            // 진행상황 업데이트
            updateProgressSteps();
        }

        // 진행상황 스텝 업데이트
        function updateProgressSteps() {
            // 모든 스텝 초기화
            frontStepEl.classList.remove('current', 'completed');
            backStepEl.classList.remove('current', 'completed');
            
            if (currentPhoto === 1) {
                frontStepEl.classList.add('current');
            } else if (currentPhoto === 2) {
                frontStepEl.classList.add('completed');
                backStepEl.classList.add('current');
            }
        }

        // 사진 촬영
        function takePhoto() {
            const photoType = currentPhoto === 1 ? "앞면" : "뒷면";
            console.log(`📷 ${photoType} 전신사진 촬영!`);
            
            // 카메라 화면 표시 (1초간)
            countdownAreaEl.classList.add('hidden');
            cameraViewEl.classList.remove('hidden');
            
            setTimeout(() => {
                // 촬영 완료 처리
                completeCurrentPhoto();
                
                if (currentPhoto < 2) {
                    // 뒷면 촬영으로
                    currentPhoto++;
                    setTimeout(() => {
                        isCountingDown = false;
                        startCountdown();
                    }, 2000); // 2초 후 다음 촬영
                } else {
                    // 모든 촬영 완료
                    setTimeout(showCompletion, 1500);
                }
            }, 1000);
        }

        // 현재 사진 완료 처리
        function completeCurrentPhoto() {
            if (currentPhoto === 1) {
                frontStepEl.classList.remove('current');
                frontStepEl.classList.add('completed');
            } else {
                backStepEl.classList.remove('current');
                backStepEl.classList.add('completed');
            }
        }

        // 완료 화면 표시
        function showCompletion() {
            countdownAreaEl.classList.add('hidden');
            countdownInfoCardEl.classList.add('hidden');
            cameraViewEl.classList.add('hidden');
            completionScreenEl.classList.remove('hidden');
            
            // 우측 정보 카드 숨기기
            rightActionsEl.classList.add('hidden');
            
            console.log('🎉 앞면/뒷면 전신사진 촬영 완료!');
        }

        // 다시 촬영
        function restartPhotoBooth() {
            currentPhoto = 1;
            isCountingDown = false;
            
            // 모든 스텝 초기화
            frontStepEl.classList.remove('current', 'completed');
            backStepEl.classList.remove('current', 'completed');
            
            completionScreenEl.classList.add('hidden');
            
            // 우측 정보 카드 다시 보이기
            rightActionsEl.classList.remove('hidden');
            
            setTimeout(startCountdown, 500);
        }

        // 분석 시작
        function startAnalysis() {
            alert('분석 페이지로 이동합니다!\n\n앞면과 뒷면 전신사진을 바탕으로 체형 분석을 시작합니다.');
            console.log('🔍 전신사진 분석 시작');
            // 실제로는 navigate('/analysis') 등으로 페이지 이동
        }

        // 페이지 종료 시 정리
        window.addEventListener('beforeunload', function() {
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }
        });
    </script>
</body>

</html>